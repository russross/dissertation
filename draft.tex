\documentclass[a4paper,12pt,twoside,openany]{report}
% pdftex for both documentclass and graphicx
\usepackage{graphicx}
\usepackage{xspace}
\usepackage{url}

% font and encoding setup
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{newcent}

% references
\usepackage{prettyref}
\newrefformat{cha}{Chapter~\ref{#1}}
\newrefformat{sec}{Section~\ref{#1}}
\newrefformat{tab}{Table~\ref{#1}}
\newrefformat{fig}{Figure~\ref{#1}}

% page setup
\usepackage[margin=1.5in]{geometry}
\usepackage{fancyhdr}
\usepackage{setspace}
\raggedbottom
\renewcommand\footnoterule{\vfill\hrule\vspace{6pt}}

% set up floats
\usepackage[font=small,labelfont=bf]{caption}
\renewcommand{\topfraction}{.8}
\renewcommand{\bottomfraction}{.8}
\renewcommand{\textfraction}{.2}
\renewcommand{\floatpagefraction}{.8}

\newcommand{\note}[1]{\marginpar{\begin{tiny}#1\end{tiny}}}
%\suppressnotes

% ignore Overfull \vbox messages
\vfuzz 2pt

\clubpenalty=9999
\widowpenalty=9999
\interfootnotelinepenalty=9999

% allow some extra space to avoid overfull hboxes
\setlength{\emergencystretch}{1em}

\newcommand{\vs}{vs.\xspace}
\newcommand{\etc}{etc.\xspace}
\newcommand{\thesistitle}{Cluster Storage for Commodity Computation}
\newcommand{\thesistitlebig}{Cluster Storage for\\ Commodity Computation}

\usepackage[
  %pdftex,
  bookmarks=true,
  linkbordercolor={0 0 1},
  pagebackref=true,
  plainpages=false,
  pdfpagelabels=true,
  hypertexnames=false,
  breaklinks=true]{hyperref}
\hypersetup{
  pdfauthor   = {Russell Glen Ross},
  pdftitle    = {\thesistitle},
  pdfsubject  = {A dissertation submitted to the University of Cambridge
                  for the degree of Doctor of Philosophy},
  pdfkeywords = {File Systems, Distributed Systems, Cluster Storage,
                 Commodity Computation, Virtualization},
  pdfcreator  = {LaTeX with hyperref package},
  pdfproducer = {pdftex}}

\begin{document}

% front matter

\pagenumbering{roman}
\include{titles}

\renewcommand\contentsname{Table of Contents}
\tableofcontents

\addcontentsline{toc}{chapter}{\listfigurename}
{ \parskip 0pt plus 1pt \listoffigures }

\addcontentsline{toc}{chapter}{\listtablename}
{ \parskip 0pt plus 1pt \listoftables }

\cleardoublepage

% page headings for main body

\pagestyle{fancyplain}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\renewcommand{\plainheadrulewidth}{0pt}
\renewcommand{\plainfootrulewidth}{0pt}

\headheight 15pt

\makeatletter
  \if@twoside
    \lhead[\fancyplain{}{\sffamily\small\textsl{\leftmark}}]{\fancyplain{}{}}
    \rhead[\fancyplain{}{}]{\fancyplain{}{\sffamily\small\textsl{\rightmark}}}
  \else
    \lhead[\fancyplain{}{}]{\fancyplain{}{\sffamily\small\textsl{\rightmark}}}
    \rhead[\fancyplain{}{}]{\fancyplain{}{}}
  \fi
\makeatother

\lfoot[\sl\thepage]{}
\cfoot[]{}
\rfoot[]{\sl\thepage}

\renewcommand{\chaptermark}[1]{\markboth{#1}{\thechapter.\ #1}}
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}

\pagenumbering{arabic}
\onehalfspace
\parskip 10pt

% main text

\include{01-introduction}
\include{02-background}
\include{03-motivation}
\include{04-design}
\include{05-implementation}
\include{06-evaluation}
\include{07-conclusion}

% bibliography

\singlespace
\renewcommand{\bibname}{References}
\addcontentsline{toc}{chapter}{\bibname}
\bibliographystyle{plain}
\bibliography{references}

\end{document}
